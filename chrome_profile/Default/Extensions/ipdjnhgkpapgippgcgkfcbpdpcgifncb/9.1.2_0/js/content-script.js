(()=>{function e(e,n){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,n){if(e){if("string"==typeof e)return t(e,n);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){o&&(e=o);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return c=e.done,e},e:function(e){l=!0,i=e},f:function(){try{c||null==o.return||o.return()}finally{if(l)throw i}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function n(e){var t=new KeyboardEvent("keydown",e);document.activeElement.dispatchEvent(t)}function o(e){var t=new KeyboardEvent("keyup",e);document.activeElement.dispatchEvent(t)}function r(){var e;n({code:"ControlLeft",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT,keyCode:17,ctrlKey:!0}),n({code:"KeyV",ctrlKey:!0,keyCode:86}),e=new KeyboardEvent("keypress",{code:"KeyV",ctrlKey:!0,keyCode:86}),document.activeElement.dispatchEvent(e)}function a(t,n){var o=!1,r=!1;if("INPUT"===t.tagName)!function(e){var t=document.activeElement;t.setAttribute("tabindex","0"),t.value=t.value+e}(n);else if(location.hostname.indexOf("x.com")>-1&&(t.classList.contains("public-DraftEditor-content")?o=!0:r=!0),location.hostname.indexOf("slack.com")>-1)if(""==t.textContent)t.textContent=n;else{t.setAttribute("tabindex","0");var a,c=null,l=e(t.children);try{for(l.s();!(a=l.n()).done;){var u=a.value;"P"===u.tagName&&(c=u)}}catch(e){l.e(e)}finally{l.f()}c.innerText=c.text+n}else if(location.hostname.indexOf("mail.google.com")>-1);else if(location.hostname.indexOf("youtube.com")>-1)t.isContentEditable&&(t.innerText=t.textContent+n);else if(o)for(var d=null,f=t,s=0;null===d&&s<10;)s++,(f=f.children.item(0)).classList.contains("public-DraftStyleDefault-block")&&i(d=f,n);else r?(t.setAttribute("tabindex","0"),t.value=t.value+n):""==t.value?t.value=n:i(t,n)}function i(e,t){e.focus();var n=document.createEvent("TextEvent");n.initTextEvent("textInput",!0,!0,window,t),r(),e.dispatchEvent(n),o({key:"KeyV",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT,ctrlKey:!0,keyCode:86}),o({key:"ControlLeft",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT,keyCode:17})}chrome.runtime.onMessage.addListener((function(e,t,n){void 0!==e.emoji&&a(document.activeElement,e.emoji)}))})();